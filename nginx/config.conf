server {
    listen 80;
    # Default server name - accepts any hostname
    server_name _;

    location / {
        # Forward all requests to the Node.js app running on port 3000
        proxy_pass http://127.0.0.1:3000;

        # Pass the original host header to the app
        proxy_set_header Host $host;
        # Pass the real client IP address
        # Sets the X-Real-IP header to contain the original client's IP address
        # This is useful when nginx acts as a reverse proxy, allowing the app server
        # to identify the real client IP instead of the proxy's IP address
        proxy_set_header X-Real-IP $remote_addr;
        # Pass the forwarded-for chain of IP addresses
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        # Pass the original protocol (http/https)
        proxy_set_header X-Forwarded-Proto $scheme;
    }
}